/************************************************************************************************/
/** 
 * @file		KsBoxShapeBullet.h
 * @brief		物理シミュレーションシステム
 * @author		Tsukasa Kato
 * @date		----/--/--
 * @since		----/--/--
 * @version		1.0.0
 */
/************************************************************************************************/

/*==============================================================================================*/
/*                                 << インクルード >>                                           */
/*==============================================================================================*/
#include "KsPhysicsBullet/KsPhysicsBulletPreCompile.h"
#include "KsBoxShapeBullet.h"

/*==============================================================================================*/
/*                                     << 定義 >>                                               */
/*==============================================================================================*/

/*==============================================================================================*/
/*                                     << 宣言 >>                                               */
/*==============================================================================================*/

/************************************************************************************************/
/*
 * コンストラクタ
 */
/************************************************************************************************/
KsBoxShapeBullet::KsBoxShapeBullet( const KsVector3d& halfExtents )
	: m_pBoxShape( 0 )
{
	m_pBoxShape = new btBoxShape( btVector3( halfExtents.x, halfExtents.y, halfExtents.z ) );
}

/************************************************************************************************/
/*
 * コンストラクタ
 */
/************************************************************************************************/
KsBoxShapeBullet::KsBoxShapeBullet( KsReal width, KsReal height, KsReal depth )
	: m_pBoxShape( 0 )
{
	m_pBoxShape = new btBoxShape( btVector3( width, height, depth ) );

	// 慣性テンソルの計算
	//if( btsMass != 0.0f )	m_pbtColShape->calculateLocalInertia( btsMass, btv3LocalInertia );
}

/************************************************************************************************/
/*
 * デストラクタ
 */
/************************************************************************************************/
KsBoxShapeBullet::~KsBoxShapeBullet()
{
	ksDELETE( m_pBoxShape );
}


/************************************************************************************************/
/*
 * 慣性テンソルの計算
 */
/************************************************************************************************/
void KsBoxShapeBullet::calculateLocalInertia( KsReal mass, KsVector3d& inertia )
{
	btVector3	localInertia( 0.0f, 0.0f, 0.0f );

	m_pBoxShape->calculateLocalInertia( mass, localInertia );

	inertia.set( localInertia.getX(), localInertia.getY(), localInertia.getZ() );
}




