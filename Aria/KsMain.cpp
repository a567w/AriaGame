/************************************************************************************************/
/** 
 * @file		KsMain.cpp
 * @brief		プログラム メイン
 * @author		Tsukasa Kato
 * @date		2011/07/02
 * @since		2011/07/02
 * @version		1.0.0
 */
/************************************************************************************************/

/*==============================================================================================*/
/*                                 << ワーニング抑制 >>                                         */
/*==============================================================================================*/

/*==============================================================================================*/
/*                                 << ライブラリリンク >>                                       */
/*==============================================================================================*/

/*==============================================================================================*/
/*                                 << インクルード >>                                           */
/*==============================================================================================*/
#include "Aria/KsGamePreCompile.h"

/*==============================================================================================*/
/*                                     << 宣言 >>                                               */
/*==============================================================================================*/

/*==============================================================================================*/
/*                                     << 定義 >>                                               */
/*==============================================================================================*/


/************************************************************************************************/
/**
 * メイン関数
 * @date		2011/07/02
 * @since		2011/07/02
 * @version		1.0.0
 */
/************************************************************************************************/
KsInt32 APIENTRY WinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, KsInt32 nCmdShow )
{
	//---------------------------------------------------------------
	// 二重起動チェックで生成 
	//---------------------------------------------------------------
	KsWindowMutex	mutex;

	//---------------------------------------------------------------
	// 2重起動防止
	//---------------------------------------------------------------
	if( !mutex.open( ksGAME_TITLE ) )
	{
		KsWindowUtility::activeFindWindow( NULL, ksGAME_TITLE );

		return 0;
	}

	//---------------------------------------------------------------
	// メイン処理
	//---------------------------------------------------------------
	KsMainThread*	pMainThread = ksNew KsMainThread( hInstance, hPrevInstance, lpCmdLine, nCmdShow );

	pMainThread->run();

	ksDELETE( pMainThread );

	return 0;
}

